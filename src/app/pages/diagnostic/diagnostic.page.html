
<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/dashboard"></ion-back-button>
    </ion-buttons>
    <ion-title>
      Diagnostic Test
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <div class="cambridge-container">
    <h1 class="text-2xl font-bold text-primary-800 dark:text-primary-200 mb-4">Cambridge English Diagnostic Test</h1>
    <p class="text-gray-600 dark:text-gray-300 mb-6">This diagnostic test will help determine your current English level. Answer all questions to get your results.</p>
    
    <mat-progress-bar mode="determinate" [value]="progressPercentage" class="mb-6"></mat-progress-bar>
    <p class="text-sm text-gray-500 dark:text-gray-400 mb-6">Question {{ currentStep + 1 }} of {{ totalSteps }}</p>
    
    <form [formGroup]="diagnosticForm">
      <mat-card class="cambridge-card mb-6">
        <mat-card-content>
          <h2 class="text-lg font-medium mb-4">{{ questions[currentStep].text }}</h2>
          
          <mat-radio-group [formControlName]="'question' + questions[currentStep].id" class="flex flex-col gap-3">
            <mat-radio-button *ngFor="let option of questions[currentStep].options" [value]="option.value" class="mb-2">
              {{ option.text }}
            </mat-radio-button>
          </mat-radio-group>
        </mat-card-content>
      </mat-card>
      
      <div class="flex justify-between">
        <ion-button (click)="previousStep()" [disabled]="currentStep === 0" color="medium">
          Previous
        </ion-button>
        
        <ion-button *ngIf="currentStep < totalSteps - 1" (click)="nextStep()" 
                   [disabled]="!diagnosticForm.get('question' + questions[currentStep].id)?.valid" 
                   color="primary">
          Next
        </ion-button>
        
        <ion-button *ngIf="currentStep === totalSteps - 1" (click)="submitDiagnostic()" 
                   [disabled]="!diagnosticForm.valid" 
                   color="success">
          Submit
        </ion-button>
      </div>
    </form>
  </div>
</ion-content>
